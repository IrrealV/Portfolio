---
/**
 * NetworkBackground - Animated dots with connecting lines
 * Creates a constellation-like effect on all devices
 */
---

<div class="network-bg" id="network-bg" transition:persist>
  <canvas id="network-canvas"></canvas>
</div>

<style>
  .network-bg {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    /* 100lvh = Large Viewport Height (max height, ignores address bar) */
    height: 100lvh;
    min-height: 100vh; /* Fallback for older browsers */
    z-index: -1;
    pointer-events: none;
    /* Optimization */
    contain: paint;
    transform: translateZ(0);
  }

  #network-canvas {
    width: 100%;
    height: 100%;
    display: block;
  }

  .network-bg {
    opacity: 0.7;
  }

  :global(.dark) .network-bg {
    opacity: 0.5;
  }
</style>

<script>
  import { initNetworkBackground } from '../../scripts/network-background';

  // Initialize on all devices (removed mobile check)
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initNetworkBackground, {
      once: true,
    });
  } else {
    initNetworkBackground();
  }

  document.addEventListener('astro:page-load', initNetworkBackground);
</script>
